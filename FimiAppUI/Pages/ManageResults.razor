@page "/Pages/ManageResults"

@inherits ManageResultsBase

<MudGrid Class="mt-n12 px-5">
    <MudItem xs="9">
        <MudText Typo="Typo.h5" Class="d-flex justify-start">MANAGE RESULTS</MudText>
    </MudItem>
    <MudItem xs="3" Class="d-flex justify-end">
        <MudIconButton Icon="@Icons.Material.Filled.Message" Color="Color.Inherit" Edge="Edge.End" />
        <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" Edge="Edge.End" />
    </MudItem>
</MudGrid>
<MudDivider DividerType="DividerType.FullWidth" />


<MudGrid Class="d-flex px-4 mt-4 align-center">
    <MudItem xs="2">
        <MudCard>
            <MudCardContent>
                <MudAutocomplete T="TermModel" Label="Term" @bind-Value="SelectedTerm" ShowProgressIndicator="true"
                                 SearchFunc="@SelectedTermSearch" ToStringFunc="@(e=> e==null?null : $"{e.TermName}")" />
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="2">
        <MudCard>
            <MudCardContent>
                <MudAutocomplete T="ExamTypeModel" Label="Exam Type" @bind-Value="SelectedExamType" ShowProgressIndicator="true"
                                 SearchFunc="@SelectedExamTypeSearch" ToStringFunc="@(e=> e==null?null : $"{e.ExamName}")" />
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="2">
        <MudCard>
            <MudCardContent>
                <MudAutocomplete T="FormModel" Label="Form" @bind-Value="SelectedForm" ShowProgressIndicator="true"
                                 SearchFunc="@SelectedFormSearch" ToStringFunc="@(e=> e==null?null : $"{e.Form}")" />
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="2">
        <MudCard>
            <MudCardContent>
                <MudAutocomplete T="StreamModel" Label="Stream" @bind-Value="SelectedStream" ShowProgressIndicator="true"
                                 SearchFunc="@SelectedStreamSearch" ToStringFunc="@(e=> e==null?null : $"{e.Stream}")" />
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="2">
        <MudButton Variant="Variant.Filled" FullWidth="true" OnClick="@FindClass" StartIcon="@Icons.Material.Filled.Save" Style="background-color:#e38d43">Submit</MudButton>
    </MudItem>
</MudGrid>
<MudDivider DividerType="DividerType.FullWidth" Class="my-6" />

<MudGrid Class="d-flex justify-start px-4">
    <MudItem xs="4">
        @if (Students is null && visible is true)
        {
            <MudProgressCircular Size="Size.Medium" Color="Color.Success" Indeterminate="true" />
        }
        else 
        {
            <MudTable Items="@Students" FixedHeader="true" Hover="true" SortLabel="Sort By" Striped="true" OnRowClick="StudentRowClickEvent" T="StudentModel">
                <HeaderContent>
                    <MudTh Style="font-size:12px;"><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<StudentModel, object>(x=>x.StudentNumber)">Student Number</MudTableSortLabel></MudTh>
                    <MudTh Style="font-size:12px;"><MudTableSortLabel InitialDirection="SortDirection.Ascending" SortBy="new Func<StudentModel, object>(x=>x.StudentName())">Name</MudTableSortLabel></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd Style="font-size:12px;" DataLabel="Student Number">@context.StudentNumber</MudTd>
                    <MudTd Style="font-size:12px;" DataLabel="Name">@context.StudentName()</MudTd>
                </RowTemplate>
                <PagerContent>
                    <MudTablePager HideRowsPerPage="true"HidePageNumber="true" />
                </PagerContent>
            </MudTable>
        }
    </MudItem>
    <MudDivider DividerType="DividerType.FullWidth" Vertical="true" FlexItem="true" />
</MudGrid>


    
        
