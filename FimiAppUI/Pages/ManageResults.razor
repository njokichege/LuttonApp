@page "/Pages/ManageResults"

@inherits ManageResultsBase

<PageTitle>Results</PageTitle>

<MudGrid Class="mt-n16 px-5" Style="@($"background:#ffffff;")">
    <MudItem xs="9">
        <MudText Typo="Typo.h5" Class="d-flex pt-2 justify-start"><b>Manage Results</b></MudText>
    </MudItem>
    <MudItem xs="3" Class="d-flex justify-end">
        <MudIconButton Icon="@Icons.Material.Filled.Message" Color="Color.Inherit" Edge="Edge.End" />
        <MudIconButton Icon="@Icons.Material.Filled.Notifications" Color="Color.Inherit" Edge="Edge.End" />
    </MudItem>
</MudGrid>

@if(SelectedTerm is not null && SelectedExamType is not null)
{
    <MudGrid Class="d-flex px-4 mt-4 align-center">
        <MudItem xs="2">
            <MudCard Elevation="0">
                <MudCardContent>
                    <MudField Label="Term" Variant="Variant.Outlined"><b>@SelectedTerm.TermName</b></MudField>
                    <!--<MudAutocomplete T="TermModel" Label="Term" @bind-Value="SelectedTerm" ShowProgressIndicator="true"
                                     SearchFunc="@SelectedTermSearch" ToStringFunc="@(e=> e==null?null : $"{e.TermName}")" Variant="Variant.Outlined" />-->
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
            <MudCard Elevation="0">
                <MudCardContent>
                    <MudField Label="Exam Type" Variant="Variant.Outlined"><b>@SelectedExamType.ExamName</b></MudField>
                    <!--<MudAutocomplete T="ExamTypeModel" Label="Exam Type" @bind-Value="SelectedExamType" ShowProgressIndicator="true"
                                     SearchFunc="@SelectedExamTypeSearch" ToStringFunc="@(e=> e==null?null : $"{e.ExamName}")" Variant="Variant.Outlined" />-->
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
            <MudCard Elevation="0">
                <MudCardContent>
                    <MudAutocomplete T="FormModel" Label="Form" @bind-Value="SelectedForm" ShowProgressIndicator="true"
                                     SearchFunc="@SelectedFormSearch" ToStringFunc="@(e=> e==null?null : $"{e.Form}")" Variant="Variant.Outlined" />
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
            <MudCard Elevation="0">
                <MudCardContent>
                    <MudAutocomplete T="StreamModel" Label="Stream" @bind-Value="SelectedStream" ShowProgressIndicator="true"
                                     SearchFunc="@SelectedStreamSearch" ToStringFunc="@(e=> e==null?null : $"{e.Stream}")" Variant="Variant.Outlined" />
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
            <MudCard Elevation="0">
                <MudCardContent>
                    <MudNumericField @bind-Value="AdmissionNumber" Label="Adm Number" Variant="Variant.Outlined" />
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="2">
            <MudButton Variant="Variant.Filled" FullWidth="true" OnClick="@FindStudent" StartIcon="@Icons.Material.Filled.Save" Color="Color.Primary" Style="background-color:#DA4167">Submit</MudButton>
        </MudItem>
    </MudGrid>
}

<MudDivider DividerType="DividerType.FullWidth" Class="my-6" />

@if (UpdateStudent is not null && StudentFoundVisible is true)
{
    <MudGrid Class="d-flex pa-5" Style="@($"background:#ffffff;")">
        <MudItem xs="12" sm="6" md="4">
            <MudField Label="First Name" Variant="Variant.Outlined"><b>@UpdateStudent.FirstName</b></MudField>
        </MudItem>
        <MudItem xs="12" sm="6" md="4">
            <MudField Label="Middle Name" Variant="Variant.Outlined"><b>@UpdateStudent.MiddleName</b></MudField>
        </MudItem>
        <MudItem xs="12" sm="6" md="4">
            <MudField Label="Admission Number" Variant="Variant.Outlined"><b>@UpdateStudent.StudentNumber.ToString()</b></MudField>
        </MudItem>
    </MudGrid>
    <MudDivider DividerType="DividerType.FullWidth" Class="my-6" />
    <MudGrid Class="pa-4" Style="@($"background:#ffffff;")">
        <MudItem xs="4">
            <MudCardContent>
                <MudNumericField @bind-Value="EnglishMarks" Label="English" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="KiswahiliMarks" Label="Kiswahili" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="MathematicsMarks" Label="Mathematics" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="PhysicsMarks" Label="Physics" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="ChemistryMarks" Label="Chemistry" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="BiologyMarks" Label="Biology" Format="F1" Variant="Variant.Outlined" />
            </MudCardContent>
        </MudItem>
        <MudItem xs="4">
            <MudCardContent>
                <MudNumericField @bind-Value="HistoryMarks" Label="History & Government" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="GeographyMarks" Label="Geography" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="CreMarks" Label="Cre" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="AgricultureMarks" Label="Agriculture" Format="F1" Variant="Variant.Outlined" />
                <MudNumericField @bind-Value="BusinessMarks" Label="Business Studies" Format="F1" Variant="Variant.Outlined" />
            </MudCardContent>
        </MudItem>
        <MudItem Class="align-content-center"  xs="2">
            <MudButton Variant="Variant.Filled" FullWidth="true" OnClick="@SubmitStudentsResults" StartIcon="@Icons.Material.Filled.Save" Color="Color.Primary" Style="background-color:#DA4167">Submit</MudButton>
        </MudItem>
    </MudGrid>
}



    
        
